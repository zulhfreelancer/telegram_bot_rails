## Telegram Bot on Rails

![](http://i.imgur.com/MQ857sS.jpg)

[Try it now](https://telegram.me/rubygemsversionbot)

Using [telegram-bot-ruby](https://github.com/atipugin/telegram-bot-ruby) gem this time to create a Telegram bot.

This bot will return latest version of a gem, coming from RubyGems thru RubyGems API.

Thank you Fadil for the guide!

### Where to put the bot code inside Rails app?

Put your Telegram bot code in a rake task (inside `lib/tasks` folder). Example: `rake telegram_bot`

### To test on localhost

Just run `rake telegram_bot` from your terminal

### Heroku deployment gotchas

1. Create a Procfile at project root directory
2. Put this inside the Procfile: `worker:  bundle exec rake <your_rake_task>`. Example: `worker:  bundle exec rake telegram_bot`
3. Push to Heroku
4. Run `heroku ps:scale worker=1`
5. Run `heroku ps:scale web=0` (because we don't need web server - we only need a worker to listen to our bot users)

### Important

1. Don't commit and push your Telegram bot token to public repo. Use figaro gem for that and put the token inside the application.yml file
2. If you already commit your token, have a chat with @BotFather and run `/revoke` command to generate a new token. Put the new token inside application.yml file (generated by figaro gem)
3. And, don't forget to add your token as Heroku config variable like below:

![](http://i.imgur.com/naG4Um6.png)
